(this["webpackJsonpreact-typescript-pokedex"]=this["webpackJsonpreact-typescript-pokedex"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),s=n.n(c),i=(n(13),n(5)),o=(n(14),function(e){var t=e.type;return r.a.createElement("span",{className:["tag","is-light",function(e){switch(e){case"fire":return"is-danger";case"water":return"is-link";case"grass":return"is-success";case"poison":return"is-primary";case"normal":case"steel":return"is-light";case"electric":return"is-warning";case"ghost":return"is-white";case"flying":default:return"is-light"}}(t.name)].join(" ")},t.name)}),u=function(e){var t,n=e.pokemon;return r.a.createElement("div",{className:"box"},r.a.createElement("article",{className:"columns is-vcentered"},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"content"},r.a.createElement("figure",{className:"poke-image"},r.a.createElement("p",{className:"image is-64x64"},r.a.createElement("img",{src:n.spriteURL,alt:""}))))),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"content"},r.a.createElement("p",{className:"subtitle is-capitalized has-text-centered"},n.displayName))),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"tags are-large"},null===(t=n.types)||void 0===t?void 0:t.map((function(e){return r.a.createElement(o,{key:e.key,type:e})})))))))},l=function(e){var t=e.pokemon;return r.a.createElement("div",{className:""},null===t||void 0===t?void 0:t.map((function(e){return r.a.createElement(u,{pokemon:e,key:e.key})})))},p=n(1),m=n.n(p),f=n(2),h=n(3),v=n(4),d=function(){function e(t,n,a,r){Object(h.a)(this,e),this.name=void 0,this.url=void 0,this.id=void 0,this.types=void 0,this.name=t,this.url=n,this.id=a,this.types=r,this.ensureID()}return Object(v.a)(e,[{key:"toJson",value:function(){return JSON.stringify(this)}},{key:"ensureID",value:function(){if(!this.id){var e=/(?<=\/)(\d{1,3})/.exec(this.url);null!==e&&(this.id=Number(e[0]))}}},{key:"displayName",get:function(){return this.name}},{key:"key",get:function(){return this.id||this.name}},{key:"spriteURL",get:function(){return"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/".concat(this.id,".png")}}],[{key:"fromJson",value:function(t){var n=JSON.parse(t);return new e(n.name,n.url,n.id,n.types)}}]),e}(),k=function(){function e(t){Object(h.a)(this,e),this.name=void 0,this.name=t}return Object(v.a)(e,[{key:"key",get:function(){return this.name}}],[{key:"fromAPITypeDetail",value:function(t){return new e(t.type.name)}}]),e}(),y=function(){function e(){Object(h.a)(this,e)}return Object(v.a)(e,[{key:"getPokemon",value:function(){var t=Object(f.a)(m.a.mark((function t(){var n,a,r,c,s,i=arguments;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:151,a="".concat(e.URI,"?limit=").concat(n),t.next=4,fetch(a);case 4:return r=t.sent,t.next=7,r.json();case 7:return c=t.sent,s=c.results.map((function(e){return new d(e.name,e.url)})),t.abrupt("return",s);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getTypes",value:function(){var t=Object(f.a)(m.a.mark((function t(n){var a,r,c,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(e.URI,"/").concat(n.id),t.next=3,fetch(a);case 3:return r=t.sent,t.next=6,r.json();case 6:return c=t.sent,s=c.types.map((function(e){return k.fromAPITypeDetail(e)})),t.abrupt("return",s);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}();y.URI="https://pokeapi.co/api/v2/pokemon";var g=function(){function e(){Object(h.a)(this,e),this._pokemon=[]}return Object(v.a)(e,[{key:"load",value:function(){var e=Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isCached){e.next=9;break}return e.next=3,this.loadFromAPI();case 3:return this._pokemon=e.sent,e.next=6,this.loadTypes();case 6:this.populateCache(),e.next=10;break;case 9:this.loadFromCache();case 10:return e.abrupt("return",this.getPokemon);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadFromAPI",value:function(){var e=Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new y,e.abrupt("return",t.getPokemon().then((function(e){return e})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadTypes",value:function(){var e=Object(f.a)(m.a.mark((function e(){var t,n=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._pokemon.map((function(e){return n.updateTypes(e)})),e.abrupt("return",Promise.all(t));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateTypes",value:function(){var e=Object(f.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.types){e.next=2;break}return e.abrupt("return");case 2:return n=new y,e.abrupt("return",n.getTypes(t).then((function(e){t.types=e})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"populateCache",value:function(){var e=this;this._pokemon.forEach((function(t){e.updateCache(t)}))}},{key:"updateCache",value:function(e){void 0!==e.id&&localStorage.setItem(e.id.toString(),e.toJson())}},{key:"loadFromCache",value:function(){var t=Object(f.a)(m.a.mark((function t(){var n,a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=[],a=1;a<e.MAX_POKEMON_ID;a++)null!==(r=localStorage.getItem(a.toString()))&&n.push(d.fromJson(r));this._pokemon=n;case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getPokemon",get:function(){return this._pokemon}},{key:"isCached",get:function(){return null!==localStorage.getItem("1")}}]),e}();g.MAX_POKEMON_ID=152;var b=g;var w=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)([]),o=Object(i.a)(s,2),u=o[0],p=o[1],m=new b;return Object(a.useEffect)((function(){m.load().then((function(e){p(e),c(!0)}))}),[]),r.a.createElement("div",{className:"App"},n?r.a.createElement(l,{pokemon:u}):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"content"},r.a.createElement("progress",{className:"progress is-small is-primary",max:"100"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,t,n){e.exports=n(16)}},[[8,1,2]]]);
//# sourceMappingURL=main.4c7bae20.chunk.js.map